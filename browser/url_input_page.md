# 从 URL 输入到页面展示究竟发生了什么

## 流程

- 输入 Url
- 请求资源
- 渲染页面

## 输入 URL

- 进行 url 补充
- 请求资源
- 资源渲染成页面

## 请求资源

请求资源时，浏览器进程会将 URL 发送到网络进程。网络进程进行资源请求。网络进程会做：

### 查询缓存资源

查询本地缓存是否缓存了该资源，有的话直接返回资源给浏览器进程，如果没有则进行下一步。

### 网络请求流程

#### 客户端

- DNS 解析域名 IP 地址，HTTPS 进行 TLS 连接
- TCP/IP 3次握手，建立与服务器连接
- 构建HTTP响应报文并发送

#### 服务端

解析响应报文：

- 重定向：301、302发起新的请求
- 根据响应头Content- Type字段渲染，如果该字段为text/html则会进入渲染流程

### 渲染

在接收到响应报文后，网络进程会通知浏览器进程。浏览器进程会做：

1. 根据域名分配渲染进程（主域名相同的为同一进程）
2. 对渲染进程发起`提交文档`信息
3. 渲染进程接收到后与网络进程建立传输管道，传输数据
4. 传输完成后，渲染进程向浏览器进程返回 `确认提交`的消息
5. 浏览器进程在收到`确认提交`
