# XSS

## 什么是 XSS 攻击

XSS 攻击是指黑客在 HTML 文件或者 DOM 中注入恶意脚本，从而在用户浏览页面时利用注入的恶意脚本对用户实施攻击的一种手段。

## 后果

- 被窃取 Token 信息
- 监听用户操作
- 修改 Dom 伪造 input，对用户信息进行搜集
- 在页面中挂载广告

## XSS 攻击类型

### 存储型 XSS 攻击

通过将脚本代码提交给后端，当用户使用该内容时，就会将脚本执行。完成注入。

### 反射型 XSS 攻击

利用本身使用域名参数渲染页面的网站通过其他渠道为用户发送带有脚本参数的该网站。使得用户自身点击从而达到注入。一般发生在邮件的 link 中，或论坛的 link 中。

### 基于 DOM 的 XSS 攻击

利用 Wi-Fi 路由器，电脑修改用户请求的网站代码，完成注入。一般发生在网吧或公共网络的地方。

## 防范 XSS 攻击

### 防止注入

#### 转码、转译

服务器对用户上传数据进行转码转译，使得存储型 XSS 攻击无法实现。

前端使用 link 中数据时进行转译。避免反射 XSS 攻击

#### 严格执行 CSP 策略

- 执行 CSP 策略，非白名单域名禁止使用。

### 防止信息获取

#### httpOnly

对关键 Cookie 数据配置 HttpOnly 请求头，禁止 js 获取。
